Present: hadley, andrewbetts, slightlyoff, mnot, dbaron, plinss, travis, timbl, yves, dka

Guests: yosuke funahashi (W3C WebTV), Brendan (IEV Tech Lab (LEAN - author), Yoav Weiss (Akamai), Wendy Seltzer (W3C)

## Wednesday AM

### Topic: Web & TV

dka: Yosuke, yesterday we discussed some TV related standards, HBBTV, control standards, split browsers (etc.). In general we were looking to understand the work in the w3c that relates to TVs and the web, from an architecture standpoint. We were hoping you were able to give us some insight, particularly the HBBTV liason.

yosuke: so you're talking about the letter we recenently recieved from HBBTV regarding EME?

dka: this was more related to core web technology, in particular the notion that hbbtv consortium is publishing a subset of the web platform in a series of specs which they are calling a "baseline". Has there been any work to your knowledge to work with them on that?

yosuke: can you paste a link?

slightlyoff: pasted a link to the subset document which had been published by OIPF, which we understood to be a predacessor to HBBTV (http://www.oipf.tv/docs/OIPF-T1-Web-Standards-TV-Profile-HTML-v1_0-2013-05-29.HTML)

yosuke: they've been doing this for a long time; OIPF was doing similar work in OIPF 4 and was merged with HBBTV in OIPF 5.

travis: I don't think we were aware of the subsetting.

ka: I think we have a concern about fixed versions vs. an auto-update model. We're wondering if any work is happening at the W3C to work with HBBTV on these issues?

yosuke: we had a f2f meeting at TPAC '15. Some folks had big issues with updating these sorts of profiles. They're now trying ot fix this. One direction this could take...we could create a forum or task force to handle this sort of profile work inside the W3C -- other SDOs have similar problems (e.g. DLNA) and want to solve it collaboratively -- the conversation is still ongoing. We're hoping to create a new discussion place within the W3C to solve this sort of problem.

dka: the web is becoming a platform where you need the latest updates to support the modern web

yosuke: the TV industry understands the issue and is looking to solve the problem.

dka: what form will that take? A Business Group?

yosuke: we're considering a few options regarding format; Business Group, or Task Force inside the Web & TV IG, or perhaps a new Community Group. We haven't decided. Mark Vickers from Comcast is leading this work from the North American TV Industry point of view.

mnot: there's some conern about a few things we've seen but we don't understand enough to express those concerns constructively. We'd like to learn more.

dka: the TAG has an interest in this activity. We would like to express that subsetting based on out-of-date specs can be harmful to the web in some way.

mnot: we also want to examine subsetting in general

travis: we also want to understand these questions as we bring the web to ever-more diverse devices

slightlyoff: we'd like to understand the constraints that folks have in other environments as well, including automotive and wearables.

dka: are you familiar with the TV control work?

yosuke: yes

travis: we were wondering if there was a plan and roadmap for this area? Or are these independent groups working to solve point problems?

dka: is the Web & TV IG acting as a focal group for this sort of work?

yosuke: yes

dka: relates also to automotive, when we talk about a web-based app like an Electronic Programming Guide that happens to use this API, or are we discussing something that allows you to control your TV from other devices (e.g. a tablet)?

yosuke: the mindset of the folks working on the API is that they'd like to create an EPG for their service using web technology. Panasonic's FireTV (using Firefox OS) already uses web technology and are already using a Mozilla-proprietary TV control API. They've got their own security model because accessing the tuner is a highly priviledged API and as a result they are very concerned about the security regarding recommendations made by the W3C

dka: interesting that you used the phrase "powerful features" as the WebAppSec WG has been working on a draft, now called "Secure Contexts", that acknowledges that some new APIs shouldn't be avilable from insecure contexts.

dka: when we were discussing the automotive API yesterday, we were discussing different modes. e.g. using your phone to control your car and likewise for TV, the same sort of thing.

travis: could I walk up to a television and using a smartphone change the channel using that phone?
[discussion of local pairing options]

dka: I think what you're saying is that use-case isn't being discussed, it's more about a web runtime working on a TV and how to interface it with the internals of the TV platform?

yosuke: when it comes to the question "is it the open web", the mindset of the folks working on this is that "we have a device that is a browser that can access many sources of content, some of which are on the network and some of which are not, and a runtime application should be able to access any source of video or devices that can be connected to the device". Their mindset or point-of-view is a bit different. It's device or service-centric. They'd like to have a generic API that they can access the sorts of capabilities of the platform.

yosuke: some folks we could have a sort of object API/URL, but others think that isn't sufficient and want device-specific APIs to control the tuner. They are aware of the discussion and would like guidance about which way to go. If the TAG could weight in it would be helpful.

travis: we had a similar discussion with the automotive folks, URL vs. API-based approaches. We don't have a strong opinion yet and want to be accomodating. There are times when it seems better to treat the device like a resource that you make network requests to and others where you might want more local processing. It might be possible to have a blended approach here.

travis: in conversation, we came to a conclusion with Automotive that it might be better to us a URL-based approach. 

dka: perhaps we should have a similar call? What would we be discussing?

travis: might be best to phrase this as an API review? Might spark some of these discussions and would be a good reason to get the relevant folks on the call.

dka: is there a specific spec or draft that could point to and/or review?

slightlyoff: just to be clear, we don't want to do unsolicited spec reviews, so perhaps we could invite folks to a call?

dka: yosuke just said that they do want to work with us.

travis: I heard two use-cases:
1. a TV running FFOS that wants to manipulate internal state through an API that they want to expose.
2. I'm a generic web browser and I want to connect to a set-top-box and I want a protocol to talk to that device. Is that accurate?

yosuke: the first is accurate. I'm not sure I understand the second case correctly. The set-top-box has a web browser within it and has lots of interfaces (to the web, tuner, HDMI devices, etc.). It's a sort of media-hub. People want to access all sorts of media sources that STBs have.

travis: ok, so both are more about a browser running inside the STB and accessing content via APIs?

yosuke: yes

travis: ah, thanks for clarifying

yosuke: the other point of the discussion is that the transport layer in the broadcast industry is changing. In the past they used MPEG to send the streams, but in the future they're moving to IP-based transport IETF FLUTE and MPEG MMT. The transport layer is converging. So what about the upper-layer web? If we have convergence at the transport, should we be trying to converge at the application layer as well?

travis: you might imagine putting all of these sorts of content into browser-provided UI, e.g. a `<video>` tag.

#### summary

[discussion of spec review timing/plan]

dka: I think 2 things came out of this conversation: we need to have a call about the TV Control API and treat it like a spec review. The second was about TV subsetting and getting involved in that.

slightlyoff: how does that group meet today?

yosuke: we have the next F2F meeting at TPAC 2016. We have bi-weekly conference calls and are focusing on TF conversations so we don't have a general IG call currently.

slightlyoff: so inviting the leaders of that group to a call is probably the next step?

dka: yes.

[discussion of next steps]

[break]


joined: wseltzer

### Topic: FIDO & WebAuth

[getting set up, going to start with FIDO]

travis: the WebAuthn WG is getting set up with the FIDO contribution as the starting point and the first task is to integrate the feedback that has already been sent to FIDO. MSFT is already revising our implementation to match the latest spec and we're following that.

travis: the TAG had provided some feedback at our last F2F which had some discussion. There was a debate about eTLD+1 (effective top level domain) vs. origins in the spec. There's some controversey and discussion about what's necessary and why. Some good feedback about it.

[group discusses the magic of "hyperlinks"]

issue: https://github.com/w3ctag/spec-reviews/issues/97

travis: that's what I had

wseltzer: the group has met a few times, Mozilla, Google, and MSFT are all implementing. Discussing with Apple to try to get them involved. There's active participation from some folks who weren't part of FIDO and it seems to be making good progress and is mostly working through Github. All of the submissions have been combined into a single document for easier cross-reference.

slightlyoff: I was wondering if the types that were being used between WebAppSec and FIDO are being aligned now that FIDO is at the W3C?

wseltzer: yes, that's happening on github.

dka: I was wondering about what's happening related to FIDO and the proposal for a Hardware Security Group? What's your view on that?

slightlyoff: I had thought that FIDO was about attestation and that HSG was going to be thinking about access to HSMs ala Web Crypto APIs? Did I misunderstand?

wseltzer: no, the FIDO folks are not specifying the hardware and indeed are using attestation to let the Relaying Party decide what to ask for. The proposed HW security group is going back to make the charter more specific and narrow the focus to something that can be given some initial starting points. One of the use-cases that's of interest there is, e.g., government Electronic Identity (EID).

wseltzer: if we can find standards and safe ways for those things talk to the web, it'd be useful

timbl: is the way the Indian system works appropriate?

wseltzer: how could we get more information on that?

dka: from your point of view there isn't a lot of overlap and the HSG folks are going to go back and constrain their charter more; is that right?

wseltzer: it's out for review, there are some objections, and we're looking to see if we have drafts that are good starting points or do we need to incubate those before coming back with a WG proposal.

dka: switching back to Web Auth, the use cases are...?

wseltzer: replacing passwords with something stronger. Not general solution, but pairwise authentication between user and site.

timbl: what's being specified?

wseltzer: the web APIs, data formats, and the protocols for that authentication. The UX is not being specified. We've seen some demos of what that might look like, but as is usual in W3C WGs, the implementers are keeping the UX piece.

timbl: that's generally true, but if there's a parallel with client certificates...they were famous for having a bad experience. And the TAG once had an issue about the padlock not including the origin in question. There's a history of browser vendors not getting this right the first time.

slightlyoff: indeed, the reason we try to keep UX out of specs is because we anticipate getting things wrong in terms of UX and needing to iterate on them independently of the API

timbl: but perhaps it's something the UX could be something we evaluate?

slightlyoff: it's not something we have the expertise to evaluate

timbl: the TAG, if it has an issue with some UX, should be taken seriously

dka: perhaps we should review some of the UXes that come out of these implementations? There's a request for input that you can't do without secure UI but I can imagine...hrm...is that being taken into account?

wseltzer: because thes are origin-bound, it's phishing resistent. Getting an authentication to a different origin won't give you something useful for logging into the site being spoofed.

travis: and as I recall, there's a bit of user-input that's fed back to the user in terms of the credential. The users will see that element which reduces the ability for spoofing.

timbl: [discussion of security images]

slightlyoff: there's a rich history of research in this area...

travis: ...which we aren't experts in...

slightlyoff: ...and I'm happy to consult our security folks and find some of those resources

dka: [demos biometric identification]

[WebAuthn does not require the "security images" or feedback of user input]

[discussion of limited nature of the unlocking that challenges from FIDO provide]

travis: it's a better experience

wseltzer: swiping a biometric or tapping a hardware token, as a test of user presence, unlocks a local authenticator, which signs a challenge with locally-stored key material

dka: is there anything happening here about multi-device authentication? Using a phone to unlock a laptop or site there?

wseltzer: the system isn't specifying the API to the authenticator, and so that could be a mobile phone that you could use to authenticate your laptop via bluetooth or typing something into your phone, or it could be by to-be-specified-elsewhere syncing or linking

slightlyoff: there was a demo of this in SF a few weeks ago; using a phone as a second-factor?

dka: is there anything else that the TAG needs to weigh in on here?

slightlyoff: I think we need to come back to the eTLD+1 question; we haven't responded there.

[discussion of how current PW managers work]

[Discussion of the eTLD+1 reliance on the Public Suffix List, and potential security concerns if that doesn't map properly]

wseltzer: That's now in the webauthn issues list, https://github.com/w3c/webauthn/issues/58 as a pointer to the TAG issue




### Topic: CORS, fetch(), credentials, etc.
#### (and Lions and Tigers and Bears, oh my!)

https://github.com/w3ctag/spec-reviews/issues/76


timbl: there was a specific issue with fetch(); a lack of reporting and a specific issue with the credentials flag.

slightlyoff: talking to group building podcasting app.  For a resource you don't need credentials to fetch-- what's the issue?  The general question about CORS maybe breaking ability to fetch resources in general.

slightlyoff: Without CORS, can fetch and feed into audio tag, but can't see the bytes without CORS.  The default is to make it opaque, not that you can't get it.

timbl: Reading weather data from different weather sites?

slightlyoff: Opacity depends on a privileged consumer to make it useful.

timbl: CORS provides a way of getting data cross-origin.


Wendy: I want to talk about work in Webappsec that relies in Fetch and fetch subsumes cors and right now yes same origin is the way we protect info flows on the web - we may in the future have alt proposals to offer but right now this is what we have and therefore the things that cors and fetch are doing should be solved by pull requests there and lets try to improve their handling until we have a complete redesign that works better. - we have lots of other features in the application security model that ... the best way to do that is to refer to fetch and to synchronize when the resource checking happens when the mixed cheching happens when the subresource integreity occurs… lots of those building blocks depend on those mechansms. I hear there are concerns with some of the details - how can we address those and unblock the movement of some of those security specs? [which may be two distinct questions]


timbl: that's "web app security" - not "the web" but "web app security."


wendy: it's for web app security used in browsers.


timbl: the issues we've discussed before...CORS has a complicated spec with lots of corner cases. Web App Sec community said things like "you can't return this error code or status to some script" but there's no explicit security model that motivates the arbitraryness of CORS. E.g., you can give a wildcard, but the wildcard isn't believed if you use credentials...and because why? There's no logic to it. It looks arbitrary. Maybe if WebAppSec an folks working on fetch() can come up with a model -- "these are the invariants that we want to hold" -- that's fine, but at the moment CORS seems weird. The credentials flag things breaks the web to a certain extent becuase it requires prior knowledge of the resources on the server by the client.

timbl: we've discussed this before but I don't konw if there's any input we can get.

[discussion of where the explanation was; sicking provided one?]

sicking's explanation: https://lists.w3.org/Archives/Public/www-tag/2016Jan/0015.html  
cf https://github.com/w3ctag/spec-reviews/issues/76#issuecomment-184883538


yves: the fact that you can't know if you're on an intranet or the internet makes people very cautious.

timbl: if we could develop a way to find out if you're on an intranet, that might be very useful

yves: you can't

dbaron: the access-control-allow-origin is a way of saying "I'm not on an intranet". The `*` basically says this is a publicly accessible site, to some extent?

timbl: it sort of says it's available from other origins

[note that there's no IP-based auth]

timbl: there's two things: who's using the app and what thing they're using. Some people may need to authenticate to use the data, but that's different than public data. You should be able to provide a wildcard

wseltzer: can we dis-aggregate these problems somehow? There are concerns with CORS, but can we respond to the real concerns that CORS is addressing? We'd like to avoid hanging up all the rest of our security specs on a an answer to that question.

timbl: one answer is that it depends on what you mean by "alternative". One option would be an alternative security model, a "trusted app" security model. To the extent that we can make CORS work it might alleviate the necessity for that.

mnot: there are members of WebAppSec who are asking that CORS be updated to note that it has been superceeded by Fetch. What's going on there?

wseltzer: there's a CORS rec and further work is being done on Fetch. Can we point people over there?

[discussion of citation]

mnot: many people have said that fetch is a horribly written spec and would like to see it improved

[discussion of forum]

mnot: "mumble"

[discussion on current state of Fetch spec - whether it is well written, etc...]


slightlyoff: theres'a difference in opinion on what accessing a URL should entail. Anne's view is that when you need ambient authority (credentials), it's different entirely and the "thing" is no longer just addressed by the URL and therefore it's reasonable to require a separate flag. I think you disagree, Tim, is that true?

timbl: yes.

slightlyoff: I'd like to make sure we crisply capture this disagreement.

[timbl threatens a wall, dka valiantly saves Her Majesty's property from damage]

[things escalate, dka volunteers HRH's windows in lieu]

[timbl whiteboards, but on a window]


timbl: CORS has already added a lot of preflight requests which are a bit of a barnacle. But now I also need to try "with credentials" but now that gives me silent failure. So now I can't know if anything has happened. What's happening at the HTTP level is totally ridiculous. The idea that you have to have magic knowledge... we could imagine other ways of getting this done, an alternative protocol name for resources with credentials, etc. This is how we introduced the "s", and introducing a "c" ("httpsc") would be awful.


wseltzer: I'm hearing that there's discussion going on and I'm wondering if we have issues with Fetch, if there's a sense for where and how we might address those. Separately or together, if we have issues with CORS, when might we address those effectively?

dka: do we need to get together with the WHATWG folks (meeting/call/irc/whatever) to hash this out? It feels like a bit of parallel conversation going on.


andrewbetts: did we resolve the redirect with CORS issue?

[discussion of the retry logic]

dbaron: the way I see Anne's model (which may not be the way he sees it) is that the lack of with-credentials is the "lower level" API and that using the credentials flag uses the cookie jar.

travis: talking about the low-level -- no with-credentials -- I'm asking if that represents a security model where the URL you're requesting is within the same origin and you make a GET and get a 200 back, the resource is released. If you make an x-origin request the request is denied somehow?

yves: the default is without credentials

dbaron: there are different things in the platform that use different values for with-credentials and they require different security checks. Does it make sense if you're going to use the ambient authority than if you're not?

yves: the thing is that you don't want to use it if you might feel you'll leak information on the server (cookies, etc.)

yves: so you have 2 modes, don't send anything (and can get results with `*` policy) but the goal is to block `*` when you're using the ambient authority because you don't want to expose information there. Maybe we're missing a third mode where the browser can know if the authentication failed an can retry if the resposne is e.g. a 401 (or equivalent in CORS)

dbaron: [scribefail]

yves: the issue is that you need the `use-credentials` flag becuase there's no way to know that the other side needs authentication and you want to hide that from the application

[discussion of low-level vs. high-level]

travis: the developer approaching the API has no idea which set of options to use when trying ot make a request. If I want to emulate what the `<script>` tag does, I need to use one combination, if I want to emulate another thing I need to use a different set of options.

timbl: if you want a low-level thing it should be an HTTP client. We extent HTTP by adding all sorts of things to it. Some client APIs don't have attitude, but Fetch has a hell of an attitude.

travis: from one point of view, fetch() should just be a pass-through to a request.

wseltzer: there's a lot of magic built into fetch right now; how do we improve on it without breaking the deployed systems that depend on it now? Anything we do will need to build in what we do right now. - going to have to keep the capabilities and many limitations that exist... any volunteers to take on some of that work?

timbl: a useful output from this meeting would be : if we could get momentum, people writing a reasonable fetch specification... to have it unreadable and obscurely expressed is not good.

Mark: important problem to address. I've been waiting for fetch to settle down. Other issue is CORS itself. Some people unhappy with how CORS work. Is it times for CORS to evolve or what? Now that webappsec has washed its hands of CORS there is no clear venue for that other than in Fetch.

wseltzer: the editors in webappsec find that raising issues and pull requests in Fetch works fine - not "washing their hands"

dka: there's perhaps feedback we can provide? Perhaps about the layering?

timbl: there's layering, but there's a lower-level thing as an HTTP client. It'd be interesting to have an implementation in JS.

mnot: it might be useful outside the browser too, e.g. with curl

dka: dbaron, should we talk with Anne?

dbaron: yes, I think it would be useful. Perhaps if we discuss some concrete things that are hard to follow.

[discussion of engagement in various fora]

[discussion of lack of crisp definition for developers about what CORS does]

travis: would that solve the issue?

mnot: I don't think that'd solve TimBL's issue; not wanting to need to know.
"discussion"

timbl: the basic functioning of the web is to fetch URLs with a single parameter: the URL


dka: actions?

mnot: one task might be to provide better developer experience for working with CORS, another might be 


mnot: when I talk with customers, they just want CORS to go away. They want the magic incantation that makes it all go away. They don't want to think about it; even security-conscious companies want that.

mnot: CORS is designed to be developer-unfriendly to force developers to need to do extra work to make things "less secure".

wseltzer: I feel compelled to note that if we made it go away, we'd get another group of people asking us to "make it go away"


timbl: we could force intranet sites to do work

mnot: we could force intranet sites to send a header

[discussion of policy mechanisms that require intranets to declare their "shape"]

[discussion of having intranet sites send a header that says they're an intranet site]

Tim: problem is your web [something] that yoy plug in at home - its ip address is e.g. 192.168... - so that's not rocket science. There are more complicated situations... That's fine. 

Dka: e.g. a printer

Mnot: many things assumed that because they're behind a firewall they are safe - but web browsers can access them and web browsers access the web so they are not secure.

Wendy: specific threat is people can send attacks to the browser that can attack the device [router, printer, etc...] exfiltrate data...

Travis: what does our proposal change about the proposal - if we had the magic wand.

Tim: all this cors stuff could be dispensed with if you could distinguish between inside-the-inranet or outside...

Travis: sounds like "zones" policy... in IE. There's an algorithm...

Hadley: we're trying to disover the shape of the network... discover what - why?

Tim: trouble is intranet boxes like webcams won't return this "i'm an intranet" header... Whether you're on a NAT and whether you're on an intranet are separate.

Hadley: all sounds spoofable...

Alex: you'd be saying "this thing knows it's an intranet site ...."

Alex: ...security is based in the notion that private IP addresses are separate from public IP addresses...

Mnot: [something something IETF]

[more discussion on magic wand]

Wendy: any closer to unblocking work of webappsec?

Wendy: mixed content, subresource integrity, etc... blocked on normative reference to Fetch...
Alex, Mnot: we're not going to solve that?

Tim: the TAG almost did solve the problem - if the TAG could get people to make a fetch spec that is more readable... people have serious concerns about legilibility, conciseness, ... gives you a duty to constantly follow that spec. and if necessary dismantle things if the spec breaks [something you're doing]...

Alex: A practical next step: a conversaiton with Anne about specifics. 

Yves: webappsec working group should have those proposals...

Hadley: Alex you talked about basing decisions on evidence... And mark, you mentioned developers having trouble using the spec... any data to point to?

Alex: no data...

Mnot: only "anecdata"...

Mnot: revising Fetch is a huge piece of work...  Finding out a way to co-op would be right way to do it.

[discussion of how to engage]

Action on Wendy to reach out to Webapp sec group to set up a joint discussion - culminating in the webappsec f2f happening 16-17 May in Silicon Valley area. Possible for some members of TAG to attend?

Alex: I think I can attend on the 16th.

Travis: we have [via mnot] developer feedback that CORS is difficult to use and they want it to "go away..."

mnot: If the primitives exposed were more aligned with the semantics then that would be good...

Alex: fetch becomes a gordian knot because it's not layered. This has the benefit of [completenes]...

Tim: it's not just xhr, it's scripts and images... in a way it's good to have it in one place it's would be better if there are simple rules that drive it... 

Mnot: in conversations with browser security teams - argument of security paternalism comes up - and yet here we dont want users to make their own choices...


Tim: "CORS is messy and unpleasent but functional" is what Wendy is saying [but I think] it's not functional. It's about protecting users from themselves which is actually not part of a security model. It's a lack of confidence in the operator. CORS is produced as securtiy model which divides the world in to public and not public but in fact it's not - it just forces people to..

Wendy: I'm wondering what substitute we are offering for its function. what I'm trying to add is a sense of the asymetry of the response. An awful lot of sites and appliances either predate current browser functionality and CORS or now assume the presence of CORS. How do we roll back and then roll forward better or switch over because we can't auto-update them all? How do we devise an architecturally cleaner/ more developer-friendly substitute that doesn't expose them to these attacks to which we've been protecting them? It's not beautiful and it's not 100% functional. I think flipping it and saying "we will break all the things currently shielded" is also not going to work.

Mnot: Don't think it's about architecture.  I just hear continuous feedback from Web developers that CORS is not working for them.

Travis: i feel it would be an interesting exercise with webappsec to try to design a new cross-origin sharing model from scratch.

Mnot: [agreeing...] talk about: whose benefit are we doing it for, who are we putting the work on...
[Wendy leaves, retrieves more coffee]

`<br type="lunch"/>`

break: all


### Topic: The Work on Privacy:

https://gist.github.com/mnot/96440a5ca74fcf328d23

Issue 101: https://github.com/w3ctag/spec-reviews/issues/101

mnot: Took some time to think about "the situation" (?). Two years ago, met with browser, security, privacy folks. feedback was: goals were interesting, but was not realistic. Coupling privacy mode with other kinds of controls was not acceptable. So, how do we move forward with privacy mode? Let's have something defined as an artifact for other specs to refer to -- when in this mode, do this. etc., etc. Problem! There is not a single Privacy mode. Notably, Safari has a totally different threat model then other browsers. They don't start a new privacy mode with a blank slate for cookies. They'll toss them after the session is closed. Others address that threat + server ...

dka: many folks assume you start privacy mode with a fresh slate.

mnot: browsers are improving their privacy modes; trying to help users understand the implications. Another way to look at this is to enumerate the types of controls that browsers provide. [cites: Firefox's delete last few minutes of history feature]. Probably, we shouldn't be specifying the user experince for browser mode, but trying a new approach. Defining a few types of controls around several threat models:  
1. Site data  
2. Local data  
3. Network data (priveldged context covers the networked stuff pretty well)
I don't want to use the phrase: "when in privacy mode, do this", rather provides an alternative way ot describing these.
It also provides a set of common user data controls.

dka: I shared this slide: http://slides.com/torgo/beasts-lws/#/0/29. People should not be considering this mode for porn [cough]. And a whole list of other usage scenarios.

mnot: are you trying to describe an approach to handling these? How would these fit with Safari's approach

mnot: Goal is to give web spec authors something to link to. Audience is spec authors.

dka: when I talk to folks like EKR, he describes this mode in a certain way--why not call it that?
(group agrees it's hard to convince EKR of anything)

dka: I'm just concerned that if folks feel the use case is so narrow to porn, they won't find it useful.

tim: if you're not doing anything wrong, why hide it -- reason used by a lot of folks.

mnot: I don't want this to become a policy document.

mnot: do folks think the document is useful?

andrew: so, you're not saying that there will be a standard for what privacy mode is?

mnot: I'm not precluding that. The doc provides the hooks for other specs. It gets us perhaps part of the way to a spec.

andrew: for a local storage example: this doc would be defining the primitives for storage, not their interaction, and how they work.

alex: what about our finding on unsactioned tracking?

mnot: slightly different. covers tracking not for sancitioned use.

alex: I thought unsactioned tracking was explicit about describing that various tracking mechanisms be configurable.

mnot: Hmm. Feedback I recieved was that we need more? (than the Finding).

alex: I guess we need to circle back with Mike West?

mnot: I'm looking for general feedback from the TAG at this point. I've written a lot, want validation.

andrew: I'd love to see a standard for what privacy mode means. To be certain what will happen across browsers.

mnot: Agree, would be nice; but browsers are pretty invested in what they are providing.

andrew: I'm somewhat shocked by Safari's behavior. I imagine other users could be confused.

dka: another question: how resistant are various browser's privacy modes to super cookies, and other issues?

mnot: I feel like we got the feedback that is a fools errand.

dka: Well, the TOR folks don't agree.

mnot: As soon as you have JavaScript enabled, it's game over...
	dka: They try hard to preserve privacy (anonymity), despite some known vulnerabilities. TOR browser will alert to certain attacks. Point is, they're doing work. Q: in your research do other privacy modes in other browsers act similarly?

mnot: No. Well, OK, a little bit with fonts, etc., but the more you do, the more it intrudes on the user experience. Considerations may be welcome, but specifiying in a spec may not work.

hadley: what spooked the browsers?

mnot: browsers do have different behaviors. It's not so much that they have strong feelings, just that they have good reasons for their decisions.

timbl: I think it is an issue when users switch browsers, and the behavior they've come to expect from their old browser isn't in the new one.

andrew: FT browser had to wrap things like localStorage because in privacy mode the API fires an exception as soon as you attempt to use it.

mnot: in this doc, I'd say that these things need to be documented (the concept). Here's how you should do this, here's what you shouldn't do.

dbaron: where do you want feedback?

dka: will open/already open spec issue.

hadley: doc goal could be "here's how the world works, now you're informed." OR "here's how it works, here's how it's broken + here's what should be standaardized". The latter seems good...

mnot: yes, hoping it may lead to something more.  My read on browser implementors is that they are less interested and have other higher-priorities.

dbaron: this area is still in development and being experimented with.

dka: similarly to Ad blocking? Even with a doc that establishes a common vocabulary for what we mean by "privacy mode" would be good. I've previously borrowed from mnot's old presentation. I've found it extremely useful in the past.

mnot: I changed the terminology largely because I've refocused on a different audience (implementors, spec authors)

dka: I think we should list some specific cases. like [Share your browser with someone, Log into a different account, Test something without context, Search without context, Symptoms checker, Research medical condition, Battered spouse support, Marginalised groups, Research political topics, NGO or aid organization AND yes  "adult content" is in the list.

dbaron: one principle for site data clearing would be to distinguish between data that sites added without user interaction and data added with user interaction (e.g., saved passwords).

hadley: how about a final section for "what work should come next". e.g., it would be helpful to converge on common vocabulary (or we should standardize).


### Topic: Spec Reviews

https://github.com/w3ctag/spec-reviews/issues/72 - Task sheduling.

alex: would be great to check-in with the React/Ember-style folks as well.


https://github.com/w3ctag/spec-reviews/issues/85 - Storage Persistence
Alex to open the comments in the issue tracker for that spec and close it.


https://github.com/w3ctag/spec-reviews/issues/87 - FormData additions in XHR
Travis to do a final wrap-up review and if nothing new found, close the issue in near-term telco.


https://github.com/w3ctag/spec-reviews/issues/108 - Web USB

mnot: if the data is walled off in a USB device, is it still on the web?

alex: this limits access to the device based on which origins are pre-approved.

alex: I see this as a very low-level API. You can imagine higher-level abstractions.

mnot: seems like the model is you buy a hardware thing, and that thing is configured to work on the manufacture's website. 

alex: we could ask whether they've thought about a "chooser model." The choser avoids the CORS-like model of granting specific permission.

travis: can't we "extend" the web into the protocols for USB so that it can talk like a websocket over a sand-box (safe) layer. Goal: a web connection through the USB wouldn't be able to brick the device, but would allow free-form communication through it.

alex: but no one is incentivized to build/bootstrap such a thing--what's in it for the device makers, that already have an ecosystem.

alex: feedback: explore a choser model (as a fallback approach?)

travis: isn't this like WebMidi?

alex: WebMidi is somewhat more structured (and safe). Also has a 'single-owner' model.

dka: alex, we'll provisionally assign to you to follow-up with Reilly to get him on a future call!


https://github.com/w3ctag/spec-reviews/issues/112 - Should spec-review discussions live inside respective spec's repository?

dka: to write-up the principles we use to track our spec reviews.


### Topic: Ad Targetting

Attending via teleconference: Brendan (IEV Tech Lab (LEAN - author), Yoav Weiss (Akamai)

andrew: I wrote this blog post: https://trib.tv/2016/03/29/on-ads-and-ad-blocking/. Retargetting of Ads (you put something into a cart, and it follows you around the web). Larger Ads are about building Brand Recognition. In response the Media Rating Council (MRC), Interactive Advertising Bureau (IAB) have pushed a few standards "viewability" to improve the honest of reporting, but specifying what counts as a viewed ad. LEAN (Lightweight, Entrypted, Ad-choice supported, Non-invasive), more recently, tries to help improve Ad behavior. We also have the BRAVE browser, which will swap-out Ads. 

dka: Is this like PrivacyBadger (EFF)? PB whitelists things based on whether they respect user privacy and DNT setting. Is that encompased in Ad-choice supported.

Brendan: no, focused on the ad's own system. When an Ad is delivered a user can either interact or not (ignore it). Ad-choices gives a third choice--non-commercial opt-out. More options for interaction--user can interact with the Ad with something other than "I want to buy this". 

Alex: the interactive button will let you provide feedback, like "not relevant to me".

Brendan: It's an area that needs more work.

andrew: want to explain LEAN a bit.

Brendan: LEAN makes publisher delivery more constent. This leads the industry to an improved experience around advertising.

andrew: specifics? (enumerates a few)
- IAB's LEAN is high level, no detail as yet, but they are hosting an event on 28th April to begin the process of filling in the detail.  So far they have
        · Adhere to IAB guidance on file size.
        · Monitor ad load times, compare against page load time. 
        · Deliver HTTPS resources into HTTPS contexts.
        · Use Ad Choices when it’s required. 
        · Allow ad skip within 15 seconds. 


Brendan: Yes, those are the low-hanging fruit. Others: how to be sensitive to the network stream. Advertise to content over time and allow reputation. Better guideance on frequency capping, data usage, variety of other criteria.  Behind the scenes, we're doing studies to understand what annoys users. We need to collect the data when we go to present this data to the Ad networks. (e.g., video and audio in Ads)

andrew: Ad Defend (an anti-ad blocker) starts an arms race.

Brendan: Clients with ad-blockers in my ideal world would send this prefernce in the HTTP header.

timbl: when re-inserting Ads, there's money there and it goes to a different person? Is anyone taking an ethical stand on this?

Brendan: for Ad-reinsertion, (invited onto the page by the publisher)... BRAVE is not invited onto the page, does it itself. The latter counters the choice of the publisher.

andrew: I've got some questions. Some may or may not be architectural. Questions are:

- Can we resolve that advertising is a key use case for the web, and that providing the means and the incentives to advertise effectively and responsibly is an important role of web architecture?
- Is it a problem for browser implementors to arbitrarily suppress or modify content that they feel detracts from the user experience?  Obvious precedent for this is pop up blocking.  We cry foul over content modification by middleboxes but we're OK with routine content modification by user agents?  Even Brave?
- Should there be a standards effort to define acceptable performance characteristics for ads, and if so is this something we should expect browsers to develop unilaterally as Opera is doing, or in concert with advertisers through the IAB?
- Is it possible to achieve a reliable, technical measure of "intrusive" or "annoying"?  Can that be measured by a browser before the content is rendered?
- Is there crossover between LEAN and Content Performance Policy? (http://wicg.github.io/ContentPerformancePolicy/)


Yoav: [Explains CPP - content performance policy]

IAB take on sandboxed iframe: http://www.iab.com/guidelines/safeframe/ 

hadley: arch of the web should be focused on needs of the user. Browser is an agent for the user. publishers may offer (or not offer) any content they want (including adverts). Ulitimately, I feel the user should be free to see Ads (or not). I'm personally a fan of paywalls; I think publishers are within their rights to offer — or not offer — content as they see fit.  I understand they may have a cost to generate content, and that has value; they can try to recoup it in any way they like, including ads.  I feel that these principles are at work at the macro level, the architecture of the web supports this, and largely working for the web. I don't think holding users hostage (you must see this ad) is how the web should work — that focuses the web on the needs of publishers.

andrew: publishers do care about users -- might want to differentiate between publishers and advertisers

dbaron: If a publisher could get ads that don't slow a page down (performance) or other valuable characteristics vs. slightly less money, it could be a win for the publisher in user satisfaction/engagement.

andrew: I'm not sure advertizers would actually be deprived of money if all browsers implemented the same.

dbaron: publishers don't know which ads are being deplayed.

timbl: publishers don't know the reprocussions of the conveyance of the Ads.

alex: generally the infrustructure is not there to discover the performance impact. Load speed and "weight" are probably the most relevant. Each, in isolation, may be OK, but paired together the performance is unexcusable. It's about the combined behavior.

timbl: cutting off ads that don't meet the quota?

alex: I think it would be hugely important. It hasn't escaped Google's view of just how bad things have become. It might be a control for sites (total size limiting), limiting what 3rd parties integrated can do. 

timbl: Could build the pre-loaded ad framework into Chrome?

alex: AMP has made big strides (put all logic into the iframe), which the UA can throttle, and is also contrained within the iframe. It's unfortnate that we have AMP today, I'm hopeful content performnce policy will help.

dka: I'm not hearing a discussion about tracking and privacy. There's a correlation between users of ad blockers, and tracking... (https://hbr.org/2015/11/ad-blockers-and-the-next-chapter-of-the-internet) The scenario: you search for a dishwasher, and then dishwashers follow you around the web. This is the user-visible impact of tracking. I might be naive here, but LEAN should also address the issues of tracking and privacy.

Brendan: LEAN's core value is: allows publishers to ahve a consistent set of guidelines for 3rd parties for user-experience. Problem of "shot-gun" retargetting. Where the Ad follows you, even though you don't have a lot of interest. Last-click or view is a broken model for assigning attribution of the Ad.

timbl:  I think the big thing is that Ad's suck. There annoying, can't get rid of them, etc., even with no track, bad Ads would still be terrible. The washing machine example will eventually get fixed--they'll noticed you just bought a washer and now need a dryer.

dka: The Ad issue is noticed by the user (the retargetting) needs to be handled by LEAN

alex: I'm curious to what degree LEAN will be enforceable. CPP might be a way to get to that. I don't know how a 3rd party would do enforcement of LEAN?

Brendan: Goal of LEAN is to provide 2 type of criteria:  
1. Assets (file size)  
2. Delivery (what the chain of services delivers)  
 * Single page load analytics  
 * Analytics over time (evaluation of an Ad may need a fair amount of data before scoring)  
3. Context (how the Ad interacts)  
I'm nervous about conveying the message: "here are the criteria for which you can block Ads" (not good for busness.).

Brendan: over 80% of ad impressions were members of the IAB.

hadley: how many of those members are interested in taking up LEAN?

Brendan: The companies most impacted by Ad blocking are interested in Paywalls... LEAN/Deal will help managed the expectations on the supply chain. I have about 130 companies iterating on LEAN.

andrew: Opera is coming up with something + LEAN + CPP + IO acceptable Ad standards. Lots of standards for "what is acceptable"? Is this proliferation OK?

hadley: As a technical development process, my gut says it is good progress. We're still in the early years. Conversion should happen relatively soon. I'm wondering about Alex's comment that this is a "product-level issue for the web"?

alex: The analytics and the placement of ads with recent mandates have really caused my phone's battery to burn in my pocket. Personally, I find that ad blocking doesn't really allow feedback (context for blocking) for publishers. No one is given this information, so the problem can't be improved.

andrew: Seems unrealisitc that every ad blocker will advertise it's presence.
... for enforcement/detection: you can't easly load/measure the Ads. Ad blockers could get creative/crowd source and block based on which Ads are annoyed. Ad Choices is somewhat biased being from the publisher. Seems like you need a 3rd party to be involved.

Yoav: We need a way of enforcing what users want. It should be enforceable. The only way up till now is to block ads.

andrew: any actions?

hadley: I'm wondering if I'm an edge case -- Ads are very distracting to me.

alex: here's a good link. Some ads are really mis-priced (cost to the user).

hadley: I'm pro-improving Ads, it still feels like we're trying to makesomething less-bad.

dka: I don't agree. I think a well-balanced Ad-funded ecosystem is a good thing. Advertising has been around for a long time, it works. Users do lots of things like DVRs to fast-forward, muting the TV during the Ad, etc.

andrew: we differ; there's two positions: no ads ever, a balanced ad framework.

mnot: big company approached me and asked for micro-payments as an alternative model for income.

andrew: If you made ads go away, you loose some of the free offerings.

timbl: there may be a world where the user can buy there way out of adversiting. Is there a "right" to buy your way out?

Brendan: You can flip that around: should I have the right to buy my burger by watching an ad?

andrew: 2 things to conclude.
1. Advertisers and publishers should be encouraged to build more user friendly way.  
2. Defining and enforcing Ad standards in the browser is a "good thing" because it incentivizes good behavior.  

mnot: it's such a huge issue for the web! Historically, we've tried to stay clear of policy statements.

alex: we do have to consider the hierarchy of consituents we have the w3c: users first, then developers, then implementors.  We can't ignore the rights of users to control their content.


### Topic:  Web Payments

https://github.com/w3ctag/spec-reviews/issues/109

Mike SmithTM: I just recently agreed to be team contact #2 with Ian Jacobs. Prior to that it seemed like a good fit. I'm going to help with lower-level tech details from the TEAM side. In particular, we need to meet the wide-review. As much feedback from "tech people" as possible. So, tech people, please review. Ian solicited some feedback: Payment Request API. Ian asked me to talk about my design questions. One major concern: We already have an HTML mechanism for dealing with streamlining the check-out process. The experience is so painful at checkout that many users give up. 1st effect is to make payment less painful. RequestAutoComplete was design for this. So... why aren't we trying to implement RequestAutoComplete?? Was spec'd a long time ago. If we re-specified today it would be different. PaymentRequest could be a re-specification, but also adds more. I'd like the TAG to be on board and aware of the HTML work that was done. I'd like to ensure we're heading in the right direction. API spec will be going to FPWD soon. So, now's the right time. Questions?

Spec links:

https://w3c.github.io/browser-payment-api/specs/architecture.html

https://w3c.github.io/browser-payment-api/specs/paymentrequest.html

https://w3c.github.io/browser-payment-api/specs/method-identifiers.html

https://w3c.github.io/browser-payment-api/specs/basic-card-payment.html

alex: so what happend with requestAutoComplete?

zack: RAC had a few problems. It didn't find broad support among implementers or authors. It had negative press. May have been tried by merchants.

Limits: can only handle form fields. Can't collect a system-level payment mechanism from newer systems like Apple Pay. Wasn't designed for integration from a financial system or 3rd party. RAC was limited to credit card scenarios.

Ade: I'd add the high-level goals: the WG has discussed should we gather a shipping address--so the goal is to make a check-out experience for eCommerse site as streamlined as possible. Lots of reasons for shopping bail-out, specifically on mobile. Current spec has support for providing a shipping address and other common criteria. Also there's a difficulty of creating an address, and we have a goal of standardizing this (global shipping companies seem to be able to figure it out). There may be shipping limitations and shipping costs, etc., we're not trying to take a PoV on it, but allow a web developer to handle these events asynchronously.

timbl: pushing back on "shipping is a primary case". But we've been talking about smaller payments systems. If the payments API is focused on shipping to the exclusion of new things like "micropayments".

zack: it really has nothing to do with shipping. Micropayments is interesting, we could do it, but its more of an industry problem. Some crypto-currency might break through.

andrew: what about re-curring payments?

zack: this is mostly between a merchant and a payment processor. (It's typically out-of-band). I need authorization for recurring payments. A flag might be passed to express intent, but the API wouldn't do anything with it. All we need to do is provide this information to users. Payment apps may eventually chose to handle this.

Adrianba: If we return a payment credit card number from the API, its up to the merchant to [possibly] do something with it. We don't have a spec yet, but there's lot of discussion around how to install new payment apps. For the user agent, we need to understand the mediation of payment systems with the rest of the ecosystem. The architecture we've chosen allows for future extensibility.

timbl: do you expect the browser to keep track of payments the user has made? If the browser tracked what was bought (and had a record) it would almost be better than a reciept. Nice for accountability.

zack: to be sure people are on the same page... the browser doesn't do the payment. It has no idea if a payment was made. The browser doesn't submit payments. 

timbl: so the payment app doesn't return fail/success.

zack: apple pay, for example, only returns a token. Payment response has a promise for completion that allows the browser to tear down its UI. Could be considered a completion.

dbaron: I like that the API could return a token, which is a much safer transaction.

Adrianba: Well, it's a balance. Initially Microsoft would prefer just tokens, but to bootstrap the system, the API will allow for credit cards. As the ecosystem evolves, you could eventually remove raw credit card numbers.

andrew: agree. It allows web sites to economically use the feature (still use credit cards or other future features).

andrew: also interested in some content processing, where you embed some info about what the cost of the content would be if you purchased it. Search engines could use that info to rank results.

zack: Sounds like an interesting UX questions. Payment request ultimately requires a user action to confirm.  Have to work through issues like where's the request coming from, what's the origin, etc., there are lots of tricky issues.

timbl: makes sense to embed the purchase info. There will be different payment options. Schema.org may have specified it.

andrew: There's nothing on the web that allows a page to specify that it's premium content. There are lots of complexities with this (what combinations of products + payments will be). Also interested to consider how this integrates with PaymentRequest.
Mike Smith: Hoping someone will volunteer to review the spec's technical review.

dka: I get the last question. From my experience working on products that deal with payment flows. The fewer clicks/choices the user has to make up front, the more likely they are to buy. Curious: is it possible on Amazon (and you want to buy an ebook) your device is configured with an ondevice payment mechanism how is it possible to display the fact on the page?

zack: design goal. Would love to see the list of 10 payment options displayed on the page. There's a little bit of conflict there. I recognize the need to want to convey the ease of purchasing. It could influence the buying decision. We don't have anything planned for this, but it is being discussed.

dka: related to permissions; if you went down this road, it would be a "powerful feature".

adrianba: an interesting question to consider. It's not in the 1st version. I wonder how often it would be used in such a scenario, especial if the merchant already has all your data (say like Amazon).
